/*! jsql-devel - v2.0.6 */
!function(){function e(){this.iframe=null,this.version=t,this.win=null,this.doc=null,this.wrapper=null,this.cm=null,this.drawnTables=[],this.wrapper_selector=null,this.theme="base",this.header_img="http://i.imgur.com/VQlJKOc.png",this.loader_img="http://i.imgur.com/VQlJKOc.png",this.dependencies=null,this.templates=[{Name:"Create",Query:"-- A Create Query Template\nCREATE TABLE IF NOT EXISTS `myTable` \n(\t`String` VARCHAR(20),\n\t`Number` INT\n)"},{Name:"Select",Query:"-- A Select Query Template\nSELECT\n\t*\nFROM\n\t`myTable`\nWHERE\n\t`Number` > 2"},{Name:"Update",Query:"-- An Update Query Template\nUPDATE `myTable`\nSET\n\t`String` = 'Big Number'\nWHERE\n\t`Number` > 2"},{Name:"Insert",Query:"-- An Insert Query Template\nINSERT INTO `myTable`\n\t(`String`, `Number`)\nVALUES\n\t('Some Number', 7)"},{Name:"Drop",Query:"-- A Drop Query Template\nDROP TABLE `myTable`"}],this.getDependencies()}if(!window.jSQL)return!1;var t="2.0.6";e.prototype.addAllTables=function(){var e;for(e in jSQL.tables)this.addTableTab(e)},e.prototype.addTableTab=function(e){var t=this.win.$;if(!(this.drawnTables.indexOf(e)>-1)){var a=t("#jSQLTableTabs").find("ul").eq(0),i="jSQLResultsTab-"+a.find("li").length;a.append('<li><a href="#'+i+'">'+e+"</a></li>"),a.after('<div id="'+i+'">Loading...</div>'),t("#"+i).data("tn",e),t("#jSQLTableTabs").tabs("refresh"),this.drawnTables.push(e)}},e.prototype.showCode=function(){for(var t,a=this,i=this.cm.getValue(),n=!0,o=jSQL.tokenize(i),s=0;s<o.length;s++)"QTD IDENTIFIER"===o[s].name&&o[s].literal.indexOf(" ")>-1&&(n=!1);if(!i||""===i)return this.alert("Enter some SQL first.","Error","ui-icon-alert");var r=this.win.$,l=r(" <div>\t<div style=float:left>\t\t<label><input type=radio name=codestyle value=0 checked> Orig</label>\t\t<label><input type=radio name=codestyle value=1> Mini</label>"+(n?"<label><input type=radio name=codestyle value=2> ES6</label>":"")+"\t\t<label><input type=checkbox class='use_vars'> Vars</label>\t\t<label><input type=checkbox class='use_comments' checked> Comments</label>\t</div>\t<div style=float:right;>\t\t<button id='copy-code' data-clipboard-target='#code-ta'>Copy</button>\t</div>\t<div style=clear:both></div>\t<textarea></textarea>\t<textarea id='code-ta' style=opacity:0;height:.2em;width:.2em></textarea></div>");a.getPreparedVals(function(n){l.appendTo("body");for(var o=[],s=0;s<n.length;s++)o.push(n[s].prepared_value);o=o.length?JSON.stringify(o):"",l.dialog({width:r("#jSQLTableTabs").width()/100*75,close:function(){l.remove()},open:function(){r("#copy-code").button({icons:{primary:"ui-icon-copy"}}),r("#copy-code").css({"line-height":"0.9"}),t=a.win.CodeMirror.fromTextArea(l.find("textarea")[0],{mode:"text/javascript",indentWithTabs:!0,smartIndent:!0,matchBrackets:!0,readOnly:!0});var n,s,c;n='"'+i.trim().replace(/\n/g,"\\n\\\n").replace(/"/g,'\\"')+'"',s="// Generated with jSQL Devel \n// "+e.dateFormatter(new Date,"l, F jS Y, g:ia")+" \n",c=s+"jSQL.query("+n+").execute("+o+");",t.getDoc().setValue(c),r("#code-ta").val(c),l.parent().find(".ui-dialog-title").html("<span class='ui-icon ui-icon-script'></span> jSQL Code"),r("input[name='codestyle'], .use_vars, .use_comments").click(function(){var a=i.trim();switch(s=r(".use_comments").is(":checked")?"// Generated with jSQL Devel \n// "+e.dateFormatter(new Date,"l, F jS Y, g:ia")+" \n":"",r("input[name='codestyle']:checked").val()){case"0":a=a.replace(/\n/g,"\\n\\\n"),n='"'+a.replace(/"/g,'\\"')+'"',c=r(".use_vars").is(":checked")?s+"var sql = "+n+";\n"+(o.length?"var params = "+o+";\n":"")+"jSQL.query(sql).execute("+(o.length?"params":"")+");":s+"jSQL.query("+n+").execute("+o+");";break;case"1":a=jSQL.minify(a),n='"'+a.replace(/"/g,'\\"')+'"',c=r(".use_vars").is(":checked")?s+"var sql = "+n+";\n"+(o.length?"var params = "+o+";\n":"")+"jSQL.query(sql).execute("+(o.length?"params":"")+");":s+"jSQL.query("+n+").execute("+o+");";break;case"2":a=a.replace(/`/g,""),n="`"+a+"`",c=r(".use_vars").is(":checked")?s+"let sql = "+n+";\n"+(o.length?"let params = "+o+";\n":"")+"jSQL.query(sql).execute("+(o.length?"params":"")+");":s+"jSQL.query("+n+").execute("+o+");"}t.getDoc().setValue(c),r("#code-ta").val(c)}),new a.win.Clipboard("#copy-code")},buttons:[{text:"OK",icon:"ui-icon-check",click:function(){r(this).dialog("close")}}]})})},e.stripQuotes=function(e){return e.length?("'"!==e[0]&&'"'!==e[0]||e[0]!==e[e.length-1]||(e=e.substr(1,e.length-2)),e):""},e.dateFormatter=function(e,t){if(isNaN(e.getTime()))return"Invalid Date";for(var a=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=[],o=0;o<t.length;o++)switch(t[o]){case"\\":n.push(t[++o]);break;case"Y":n.push(""+e.getFullYear());break;case"y":n.push((""+e.getFullYear()).substring(2));break;case"m":n.push(("0"+(e.getMonth()+1)).substr(-2,2));break;case"n":n.push(""+(e.getMonth()+1));break;case"t":n.push(""+new Date(e.getFullYear(),e.getMonth()+1,0).getDate());break;case"d":n.push(("0"+e.getDate()).substr(-2,2));break;case"j":n.push(e.getDate()+"");break;case"w":n.push(e.getDay());break;case"g":n.push(""+(e.getHours()>12?e.getHours()-12:e.getHours()));break;case"G":n.push(""+e.getHours());break;case"h":n.push(("0"+(e.getHours()>12?e.getHours()-12:e.getHours())).substr(-2,2));break;case"H":n.push(("0"+e.getHours()).substr(-2,2));break;case"i":n.push(("0"+e.getMinutes()).substr(-2,2));break;case"s":n.push(("0"+e.getSeconds()).substr(-2,2));break;case"N":n.push(0==e.getDay()?7:e.getDay());break;case"L":n.push(e.getFullYear()%4==0&&e.getFullYear()%100!=0||e.getFullYear()%400==0?"1":"0");break;case"o":n.push(0==e.getMonth()&&e.getDate()<6&&e.getDay()<4?e.getFullYear()-1:e.getFullYear());break;case"B":n.push(Math.floor(1e3*((e.getUTCHours()+1)%24+e.getUTCMinutes()/60+e.getUTCSeconds()/3600)/24));break;case"v":n.push((e.getTime()+"").substr(-3));break;case"Z":n.push(60*e.getTimezoneOffset());break;case"U":n.push(Math.floor(e.getTime()/1e3));break;case"a":n.push(e.getHours()>11?"pm":"am");break;case"A":n.push(e.getHours()>11?"PM":"AM");break;case"l":n.push(i[e.getDay()]);break;case"D":n.push(i[e.getDay()].substr(0,3));break;case"F":n.push(a[e.getMonth()]);break;case"M":n.push(a[e.getMonth()].substring(0,3));break;case"c":n.push(e.toISOString());break;case"S":var s=!1,r=n[n.length-1],l=n[n.length-2];"1"==r&&(s="st"),"2"==r&&(s="nd"),"3"==r&&(s="rd"),"1"!=l&&s||(s="th"),n.push(s);break;case"W":for(var c=new Date(e.getFullYear(),0),u=new Date(e.getFullYear(),e.getMonth(),e.getDate());u.getDay()<6;)u.setDate(u.getDate()+1);u=u.getTime();for(var d=0;c.getTime()<u;)4==c.getDay()&&d++,c.setDate(c.getDate()+1);n.push(d);break;case"z":for(var c=new Date(e.getFullYear(),0,1,0,0,0,0),p=0;c.getTime()<e.getTime();)p++,c.setDate(c.getDate()+1);n.push(p);break;default:n.push(t[o])}return n.join("")},e.prototype.getPreparedVals=function(e){for(var t=this.win.$,a=jSQL.tokenize(this.cm.getValue()),i=[],n=[],o=0;o<a.length;o++)if("SYMBOL"===a[o].type&&"QUESTION MARK"===a[o].name){a[o].prepared_value=null;var s=i.length;n.push("<option value="+s+">"+(1+s)+") "+a[o].value+" (char#"+a[o].input_pos+")</option>"),i.push(a[o])}if(!i.length)return e(i);$d=t("<div>"),$d.appendTo("body"),$d.html("<p>Enter values for your prepared statement:</p><div><select class='prepared-val-index'>"+n.join("")+"</select></div><div><label><input class='is-prepared-val-null' checked type='checkbox' /> NULL</label></div><div><textarea class=prepared-val-ta></textarea></div>"),$d.dialog({close:function(){$d.remove()},open:function(){$d.parent().find("button[title='Close']").remove(),t(".is-prepared-val-null").mouseup(function(){if(!t(this).is(":checked")){var e=t(".prepared-val-index").find("option:selected").val();i[e].prepared_value=null,t(".prepared-val-ta").val("")}}),t(".prepared-val-ta").keyup(function(){var e=t(".prepared-val-index").find("option:selected").val(),a=t(this).val();a&&""!=a||(a=null),i[e].prepared_value=a,t(".is-prepared-val-null").prop("checked",null===a)}),t(".prepared-val-index").change(function(){var e=t(this).find("option:selected").val();null===i[e].prepared_value?(t(".is-prepared-val-null").prop("checked",!0),t(".prepared-val-ta").val("")):(t(".is-prepared-val-null").prop("checked",!1),t(".prepared-val-ta").val(i[e].prepared_value))}),$d.parent().find(".ui-dialog-title").html("<span class='ui-icon ui-icon-help'></span> Prepared Values")},buttons:[{text:"OK",icon:"ui-icon-check",click:function(){e(i),t(this).dialog("close")}}]})},e.prototype.getDependencies=function(){-1==="base black-tie blitzer cupertino dark-hive dot-luv eggplant excite-bike flick hot-sneaks humanity le-frog mint-choc overcast pepper-grinder redmond smoothness south-street start sunny swanky-purse trontastic ui-darkness ui-lightness vader".split(" ").indexOf(this.theme)&&(this.theme="base");var e=["https://code.jquery.com/jquery-2.2.4.js","https://code.jquery.com/ui/1.12.0/jquery-ui.min.js","https://code.jquery.com/ui/1.12.1/themes/"+this.theme+"/jquery-ui.css","https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js","https://cdn.datatables.net/1.10.13/js/dataTables.jqueryui.min.js","https://cdn.datatables.net/1.10.13/css/dataTables.jqueryui.min.css","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.22.0/codemirror.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.22.0/mode/sql/sql.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.22.0/addon/hint/show-hint.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.22.0/addon/hint/sql-hint.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.31.0/mode/javascript/javascript.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.22.0/codemirror.css","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.22.0/addon/hint/show-hint.css","https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js"];this.dependencies=e},e.prototype.typeParamPrompt=function(e,t,a,i){var n=this.win.$,o=a;$d=n("<div>"),$d.appendTo("body"),$d.html("Verify the "+t+" parameter for this "+e+" column or click Confirm to accept the default.<br><input class='val' value='"+a+"' style='width:3em;'><br><code>"+e+"("+a+")</code>"),n(".val").keyup(function(){o=n(this).val(),$d.find("code").html(e+"("+o+")")}),$d.dialog({close:function(){$d.remove()},open:function(){$d.parent().find("button[title='Close']").remove(),$d.parent().find(".ui-dialog-title").html("<span class='ui-icon ui-icon-wrench'></span> Type Parameter")},buttons:[{text:"Confirm",icon:"ui-icon-check",click:function(){n(this).dialog("close"),i(o)}}]})},e.prototype.enumParamPrompt=function(t){var a=this.win.$,i=this,n=a("<div>"),o=[],s=function(){var t=a("<div><input class='val'><span class='removerow ui-icon ui-icon-close'></span></div>");n.find(".enums").append(t),t.find(".removerow").click(function(){t.remove(),o=[],n.find(".val").each(function(){o.push(e.stripQuotes(a(this).val()))})}),t.find(".val").keyup(function(){o=[],n.find(".val").each(function(){o.push(e.stripQuotes(a(this).val()))})})};n.appendTo("body"),n.html("Enter the enumerables for this column:<br><div class='enums'></div>"),s(),n.dialog({close:function(){n.remove()},open:function(){n.parent().find("button[title='Close']").remove(),n.parent().find(".ui-dialog-title").html("<span class='ui-icon ui-icon-wrench'></span> Enter Enumerables")},buttons:[{text:"Cancel",icon:"ui-icon-close",click:function(){a(this).dialog("close"),t(!1)}},{text:"Add Enum",icon:"ui-icon-plus",click:s},{text:"Done",icon:"ui-icon-close",click:function(){if(!o.length)return i.alert("Enter at least one enumerable or change the column type.","Error","ui-icon-alert");a(this).dialog("close"),t(o)}}]})},e.prototype.makeTableHTML=function(e,t){var a,i,n,o,s;void 0===t&&(t=!0),(a=[]).push("<table><thead><tr>");for(i in e[0])a.push("<th>"+i+"</th>");for(a.push("</tr></thead><tbody>"),n=0;n<e.length&&t;n++){a.push("<tr>");for(i in e[n])(s="string"!==(o=typeof e[n][i])&&"number"!==o?"["+o+"]":e[n][i]).length>50&&(s=s.substring(0,47)+"..."),a.push("<td>"+s+"</td>");a.push("</tr>")}return a.push("</tbody></table>"),a.join("")},e.prototype.typeChangeEvent=function(e,t){var a=this,i=this.win.$;e.find("select").change(function(){var n=i(this).val();switch(n){case"NUMERIC":case"NUMBER":case"DECIMAL":case"FLOAT":case"TINYINT":case"SMALLINT":case"MEDIUMINT":case"INT":case"BIGINT":a.typeParamPrompt(n,"display width","",function(i){e.data("type",n),e.data("type-param",i);var o=e.find("select").parent().empty();o.append(n+"("+i+") <span class='ui-icon ui-icon-pencil'></span>"),o.find(".ui-icon-pencil").click(function(){e.data("type",""),e.data("type-param",""),o.html("<select>"+t.join("")+"</select>"),a.typeChangeEvent(e,t)})});break;case"VARCHAR":case"LONGTEXT":case"MEDIUMTEXT":a.typeParamPrompt(n,"string length","",function(i){e.data("type",n),e.data("type-param",i);var o=e.find("select").parent().empty();o.append(n+"("+i+") <span class='ui-icon ui-icon-pencil'></span>"),o.find(".ui-icon-pencil").click(function(){e.data("type",""),e.data("type-param",""),o.html("<select>"+t.join("")+"</select>"),a.typeChangeEvent(e,t)})});break;case"ENUM":a.enumParamPrompt(function(i){if(!i)return e.find("select").find("option").eq(0).prop("selected",!0),!1;e.data("type",n),e.data("type-param",i);var o=e.find("select").parent().empty();o.append(n+"('"+i.join("','")+"') <span class='ui-icon ui-icon-pencil'></span>"),o.find(".ui-icon-pencil").click(function(){e.data("type",""),e.data("type-param",""),o.html("<select>"+t.join("")+"</select>"),a.typeChangeEvent(e,t)})});break;case"CHAR":a.typeParamPrompt(n,"char length","4",function(i){if(!i||""===i)return a.alert("You must enter a char length for the char type.","Error","ui-icon-alert"),e.find("select").find("option").eq(0).prop("selected",!0),!1;e.data("type",n),e.data("type-param",i);var o=e.find("select").parent().empty();o.append(n+"("+i+") <span class='ui-icon ui-icon-pencil'></span>"),o.find(".ui-icon-pencil").click(function(){e.data("type",""),e.data("type-param",""),o.html("<select>"+t.join("")+"</select>"),a.typeChangeEvent(e,t)})});break;default:e.data("type",n),e.data("type-param","");var o=e.find("select").parent().empty();o.append(n+" <span class='ui-icon ui-icon-pencil'></span>"),o.find(".ui-icon-pencil").click(function(){e.data("type",""),e.data("type-param",""),o.html("<select>"+t.join("")+"</select>"),a.typeChangeEvent(e,t)})}})},e.prototype.minifyjSQLQuery=function(){var e=this.cm.getValue();this.cm.getDoc().setValue(jSQL.minify(e))},e.prototype.addColumnRow=function(){var e=this.win.$,t=["<option>Choose...</option>"];for(i=0;i<jSQL.types.list.length;i++)if(t.push("<option value='"+jSQL.types.list[i].type+"'>"+jSQL.types.list[i].type+"</option>"),jSQL.types.list[i].aliases&&jSQL.types.list[i].aliases.length)for(var a=0;a<jSQL.types.list[i].aliases.length;a++)t.push("<option value='"+jSQL.types.list[i].aliases[a]+"'> -- "+jSQL.types.list[i].aliases[a]+"</option>");var n=e("<tr>\t<td><input type=text class=colname-jma placeholder='Column Name' /></td>\t<td>\t\t<select>"+t.join("")+"</select>\t</td>\t<td><input type=checkbox class=col-null-jma /></td>\t<td><input type=text class=col-default-jma style=width:6em /></td>\t<td><input type=checkbox class=col-ai-jma /></td>\t<td><input type=checkbox class=col-pk-jma /></td>\t<td><input type=checkbox class=col-un-jma /></td>\t<td><span class='ui-icon ui-icon-circle-close'></span></td></tr>");e("#jSQLNewTableTab").find("tbody").append(n),n.find(".ui-icon-circle-close").click(function(){n.remove()}),this.typeChangeEvent(n,t)},e.prototype.alert=function(e,t,a){var i=this.win.$;t=t||"",$d=i("<div>"),$d.appendTo("body"),$d.html(e),$d.dialog({close:function(){$d.remove()},open:function(){var e="";a&&(e+="<span class='ui-icon "+a+"'></span> "),t&&(e+=t),e&&$d.parent().find(".ui-dialog-title").html(e)},buttons:[{text:"OK",icon:"ui-icon-check",click:function(){i(this).dialog("close")}}]})},e.prototype.confirm=function(e,t,a,i){var n=this.win.$;title="Confirm",t=t||function(){},a=a||"OK",i=i||"Cancel",$d=n("<div>"),$d.appendTo("body"),$d.html(e),$d.dialog({closeOnEscape:!1,close:function(){$d.remove()},open:function(){var e="<span class='ui-icon ui-icon-help'></span> ";title&&(e+=title),$d.parent().find("button[title='Close']").remove(),e&&$d.parent().find(".ui-dialog-title").html(e)},buttons:[{text:i,icon:"ui-icon-close",click:function(){n(this).dialog("close"),t(!1)}},{text:a,icon:"ui-icon-check",click:function(){n(this).dialog("close"),t(!0)}}]})},e.prototype.runjSQLQuery=function(){var e,t,a,i,n,o,s;s=this.win.$,o=this,t=this.cm.getValue(),this.getPreparedVals(function(r){for(var l=[],c=0;c<r.length;c++)l.push(r[c].prepared_value);l.length||(l=void 0);try{e=jSQL.query(t).execute(l),a=[],void 0!==e&&(a=e.fetchAll("assoc"),"DROP"===e.type&&(o.close(),o.open(function(){o.cm.getDoc().setValue(t)}))),i=a.length?'<br><div><small><b>Results</b></small></div><div style="overflow-x:auto; width:100%; margin:0; padding:0;">'+o.makeTableHTML(a)+"</div>":"<center><b>No results to show</b><br>Enter a query</center>",o.addAllTables(),s("#jSQLMAQueryResults").html(i),s("#jSQLMAQueryResults").find("table").DataTable({order:[]})}catch(e){throw n=e.message?e.message+"":e+"",o.alert(n,"Error","ui-icon-alert"),e}})},e.prototype.open=function(e,t){if(!this.isOpened()){var a={};if("object"==typeof e){for(var i in e)e.hasOwnProperty(i)&&(a[i]=e[i]);e=a.wrapper?a.wrapper:void 0,t="function"==typeof a.callback?a.callback:"function"==typeof t?t:function(){}}a.theme&&(this.theme=a.theme),a.header_img&&(this.header_img=a.header_img),a.loader_img&&(this.loader_img=a.loader_img),"function"==typeof e&&(t=e),e||(e=this.wrapper_selector),this.wrapper_selector=e,this.wrapper_selector&&(this.wrapper=document.querySelector(this.wrapper_selector)),this.bg=null===this.wrapper?"rgba(255,255,255,0.9)":"transparent",a.bg&&(this.bg=a.bg);var n="background:"+a.bg+"; overflow-x: auto; border: 0px none transparent; padding: 0px; width:100%; height: 100%;";null===this.wrapper&&(n+="position:fixed; top:0; left:0; overflow-y:auto; z-index: 2147483646;"),this.iframe=document.createElement("iframe"),this.iframe.setAttribute("style",n),this.wrapper&&(this.wrapper.innerHTML=""),(this.wrapper?this.wrapper:document.body).appendChild(this.iframe),this.win=this.iframe.contentWindow||this.iframe,this.doc=this.iframe.contentDocument||this.iframe.contentWindow.document;var o=this;this.iframe.onload=function(){o.loadDependencies(function(){jSQL.load(function(){o.drawInterface(),o.initTabs(),o.initEvents(),o.addAllTables(),o.initCodemirror(),"function"==typeof t&&t()})})},this.doc.write("<!doctype HTML><html><head><style>body{font-family:Tahoma, Geneva, sans-serif;}</style></head><body><center><br><br>"+(this.loader_img?"<img src='"+this.loader_img+"' style=width:40vw; /><br>":"")+"<span>Loading jSQL Devel... (<span id='progress'>0%</span>)</span></center></body></html>"),this.doc.close()}},e.prototype.close=function(){this.iframe.parentNode.removeChild(this.iframe),this.wrapper&&(this.wrapper.innerHTML=""),this.iframe=null,this.wrapper=null,this.win=null,this.doc=null,this.cm=null,this.drawnTables=[]},e.prototype.loadDependencies=function(e){var t=this,a=this.doc.getElementById("progress");this.getDependencies(),function i(n){var o;if(a&&n>0){var s=Math.floor(n/t.dependencies.length*1e3)/10;a.innerHTML=s+"%"}if(n>=t.dependencies.length)return e();if(".CSS"===(o=t.dependencies[n]).substr(-4).toUpperCase())return t.doc.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend","<link rel='stylesheet' href='"+o+"'>"),i(n+1);var r;(r=t.doc.createElement("script")).type="text/javascript",r.readyState?r.onreadystatechange=function(){"loaded"!=r.readyState&&"complete"!=r.readyState||(r.onreadystatechange=null,setTimeout(function(){i(n+1)},1e3))}:r.onload=function(){setTimeout(function(){i(n+1)},1e3)},r.src=o,t.doc.getElementsByTagName("head")[0].appendChild(r)}(0)},e.prototype.drawInterface=function(){var e,t,a,i,n=this.win.$;for(t="<select id='queryTypeSelect'><option>Choose...</option>",a=(e=this.templates).length;a--;)t+="<option value='"+e[a].Name+"'>"+e[a].Name+"</option>";t+="</select>",i=n("body").empty(),this.wrapper&&i.empty(),i.html('<div style=float:right><h5><span class="ui-icon ui-icon-heart"></span> jSQL Version: '+jSQL.version+" | jSQLDevel Version: "+this.version+"</h5></div><div style=float:left>"+(this.header_img?'<img src="'+this.header_img+'" style=height:3em;line-height:0.9; />':"")+"</div><div style=clear:both></div>"),i.append("<div id='jSQLTableTabs'>\t <ul>\t\t <li><a href='#jSQLNewTableTab'><span class='ui-icon ui-icon-flag'></span> Table Wizard</a></li>\t\t <li><a href='#jSQLResultsTab'><span class='ui-icon ui-icon-document-b'></span> Worksheet</a></li>\t </ul>\t <div id='jSQLNewTableTab'>\t\t <input type='text' id='tableName' placeholder='Table Name' />\t\t <label><input type='checkbox' id='ifnotexists' /> IF NOT EXISTS</label>\t\t <button id=addTableColumnRow>Add Column</button>\t\t <div style='width:100%;overflow:auto'>\t\t <table>\t\t\t <thead>\t\t\t\t <tr>\t\t\t\t\t <th>Name</th>\t\t\t\t\t <th>Type</th>\t\t\t\t\t <th>NULL</th>\t\t\t\t\t <th>DEFAULT</th>\t\t\t\t\t <th>AI</th>\t\t\t\t\t <th>PK</th>\t\t\t\t\t <th>UN</th>\t\t\t\t\t <th></th>\t\t\t\t </tr>\t\t\t </thead>\t\t\t <tbody></tbody>\t\t </table>\t\t </div>\t\t <hr>\t\t <button id=resetTableBuilder>Reset</button>\t\t <button id=runTableBuilder>Build SQL</button>\t </div>\t <div id='jSQLResultsTab'>\t\t <div>\t\t\t <div style='float:right;'><small><b>autocomplete</b>: <i>ctrl+space</i></small></div>\t\t\t <div style='float:left'><b>Template: </b>"+t+"</div>\t\t\t <div style='clear:both;'></div>\t\t </div>\t\t <textarea id='jSQLDevelQueryBox'></textarea>\t\t <div style='text-align:right;'>\t\t\t <button id='jSQLExecuteQueryButton'>Run Query</button>\t\t\t <button id='jSQLMinifyQueryButton'>Minify</button>\t\t\t <button id='jSQLShowCodeButton'>Show Code</button>\t\t\t <button id='jSQLResetButton'>Reset</button>\t\t\t <button id='jSQLCommitButton'>Commit</button>\t\t </div>\t\t <div id='jSQLMAQueryResults'><center><b>No results to show</b><br>Enter a query</center></div>\t </div></div>"),n("#queryTypeSelect").css({"line-height":"0.9"}),n("#jSQLExecuteQueryButton").button({icons:{primary:"ui-icon-caret-1-e"}}),n("#jSQLExecuteQueryButton").css({"line-height":"0.9"}),n("#jSQLMinifyQueryButton").button({icons:{primary:"ui-icon-minusthick"}}),n("#jSQLMinifyQueryButton").css({"line-height":"0.9"}),n("#jSQLResetButton").button({icons:{primary:"ui-icon-refresh"}}),n("#jSQLResetButton").css({"line-height":"0.9"}),n("#jSQLCommitButton").button({icons:{primary:"ui-icon-check"}}),n("#jSQLCommitButton").css({"line-height":"0.9"}),n("#resetTableBuilder").button({icons:{primary:"ui-icon-refresh"}}),n("#resetTableBuilder").css({"line-height":"0.9"}),n("#addTableColumnRow").button({icons:{primary:"ui-icon-circle-plus"}}),n("#addTableColumnRow").css({"line-height":"0.9"}),n("#runTableBuilder").button({icons:{primary:"ui-icon-triangle-1-e"}}),n("#runTableBuilder").css({"line-height":"0.9"}),n("#jSQLShowCodeButton").button({icons:{primary:"ui-icon-script"}}),n("#jSQLShowCodeButton").css({"line-height":"0.9"}),this.addColumnRow()},e.prototype.initTabs=function(){var e=this.win.$;e("#jSQLTableTabs").tabs({active:1,beforeActivate:function(t,a){void 0!==e(a.newPanel).data("tn")&&e(a.newPanel).html("Loading...")},activate:function(t,a){setTimeout(function(){var t,i,n,o,s;if(void 0!==(t=e(a.newPanel).data("tn"))){for(i=jSQL.select("*").from(t).execute().fetchAll("array"),n='<div style="overflow-x:auto; width:100%; margin:0; padding:0;"><table></table></div>',e(a.newPanel).html(n),o=[],s=0;s<jSQL.tables[t].columns.length;s++)o.push({title:jSQL.tables[t].columns[s]});e(a.newPanel).find("table").DataTable({data:i,columns:o})}},500)}})},e.prototype.initEvents=function(){var t=this.win.$,a=this;t("#queryTypeSelect").change(function(){var e,i;if(void 0!==(e=t(this).val())&&""!==e&&null!==e&&!1!==e){for(var n=0;n<a.templates.length;n++)a.templates[n].Name===e&&(i=a.templates[n].Query);a.cm.getDoc().setValue(i),t(this).val(t(this).find("option:first").val())}}),t("#jSQLResetButton").click(function(){a.confirm("Do you want to delete all tables?",function(e){e&&(jSQL.reset(),a.close(),a.open())})}),t("#jSQLCommitButton").click(function(){jSQL.commit(),t("#jSQLCommitButton").button("option","label","Committed!"),setTimeout(function(){t("#jSQLCommitButton").button("option","label","Commit")},2e3)}),t("#jSQLExecuteQueryButton").click(function(){a.runjSQLQuery()}),t("#jSQLMinifyQueryButton").click(function(){a.minifyjSQLQuery()}),t("#addTableColumnRow").click(function(){a.addColumnRow()}),t("#resetTableBuilder").click(function(){t("#jSQLNewTableTab").find("tbody").empty(),t("#tableName").val(""),a.addColumnRow()}),t("#runTableBuilder").click(function(){var i=["-- Generated with jSQL Devel on "+e.dateFormatter(new Date,"l, F jS Y, g:ia")+" \nCREATE TABLE "];t("#ifnotexists").is(":checked")&&i.push("IF NOT EXISTS ");var n=t("#tableName").val();if(!n||""==n)return a.alert("You must enter a table name.","Error","ui-icon-alert");i.push("`"+n+"` (\n");var o=[],s=!1;t("#jSQLNewTableTab").find("tbody").find("tr").each(function(){if(!s){var n=t(this).find(".colname-jma").val();if(!n||""==n)return a.alert("You must enter a column namefor ever column.","Error","ui-icon-alert");i.push("\t`"+n+"`");var r=t(this).data("type"),l=t(this).data("type-param");Array.isArray(l)&&(l='"'+l.join('", "')+'"'),r&&""!==r&&(i.push(" "+r),l&&""!==l&&i.push("("+l+")")),i.push(t(this).find(".col-null-jma").is(":checked")?" NULL":" NOT NULL");var c=t(this).find(".col-default-jma").val();if(c&&""!==c&&(c=["NUMERIC","NUMBER","DECIMAL","FLOAT","TINYINT","SMALLINT","MEDIUMINT","INT","BIGINT"].indexOf(r)>-1?parseFloat(c):'"'+e.stripQuotes(c)+'"',i.push(" DEFAULT "+c)),t(this).find(".col-ai-jma").is(":checked")){if(!t(this).find(".col-pk-jma").is(":checked")||"INT"!==r)return s=!0,a.alert("AUTO_INCREMENT colunm must be INT type and PRIMARY KEY.","Error","ui-icon-alert");i.push(" AUTO_INCREMENT")}t(this).find(".col-un-jma").is(":checked")&&i.push(" UNIQUE KEY"),t(this).find(".col-pk-jma").is(":checked")&&o.push(n),i.push(",\n")}}),s||(o.length&&i.push("\tPRIMARY KEY (`"+o.join("`, `")+"`)\n"),i.push(")"),t("#jSQLTableTabs").tabs("option","active",1),a.cm.getDoc().setValue(i.join("")))}),t("#jSQLShowCodeButton").click(function(){a.showCode()})},e.prototype.initCodemirror=function(){var e=this.win.$;e("head").append("<style>.CodeMirror-hints, .CodeMirror-hint, .CodeMirror-hint-active { z-index:2147483647 !important;}.CodeMirror {border: 1px solid #eee;height: auto;}</style>");var t,a={};for(t in jSQL.tables)a[t]=jSQL.tables[t].columns;this.cm=this.win.CodeMirror.fromTextArea(e("#jSQLDevelQueryBox")[0],{mode:"text/x-mysql",indentWithTabs:!0,smartIndent:!0,matchBrackets:!0,autofocus:!0,extraKeys:{"Ctrl-Space":"autocomplete"},hint:this.win.CodeMirror.hint.sql,hintOptions:{tables:a}}),e("#jSQLTableTabs").find(".CodeMirror").css({border:"1px solid #eee",height:"auto"})},e.prototype.isOpened=function(){return null!==this.iframe},jSQL.devel=new e}();